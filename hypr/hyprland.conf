# Use alt as mod
$mod = ALT

# General settings
general {
    border_size = 2
    gaps_in = 4
    gaps_out = 4
    layout = scrolling
    col.active_border = rgba(00ffffff)
}

# Language configuration
input {
    kb_layout = us,rs(latin)
    kb_options = grp:lctrl_lwin_toggle
    repeat_delay = 350
    repeat_rate = 60
    follow_mouse = 2
}

scrolling {
  column_width = 0.4
  focus_fit_method = 0
}

animation = windows, 1, 2, default
animation = workspaces, 0
animation = fade, 0

# Hide borders when single window
windowrule {
    name = hide_solo_border
    match:workspace = w[t1]
    border_size = 0
    rounding = 0
}

windowrule {
    name = hide_fullscreen_border
    match:workspace = f[1]
    border_size = 0
    rounding = 0
}

# Window decoration
decoration {
    rounding = 6
    active_opacity = 1.0
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0
}

plugin {
    autotile {
        enable = true
    }
}

# Output config
monitor=DP-1,3440x1440@144,0x0,1

# Exit fullscreen on new window and focus
misc:on_focus_under_fullscreen = 2

# Startup applications
exec-once = hyprpm reload -n
exec-once = hypridle
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = nm-applet
exec-once = waypaper --restore
exec-once = dropbox
exec-once = google-chrome-stable
exec-once = kitty
exec-once = ~/.config/waybar/start.sh

# QT Theme
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_STYLE_OVERRIDE,Adwaita-dark

# Keybindings
bind = $mod,Return,exec,kitty
bind = $mod,b,exec,google-chrome-stable
bind = $mod,d,exec,~/.config/rofi/launch.sh

# Reload and exit hyprland
bind = $mod+SHIFT,e,exec,zenity --question --text="Do you really want to exit Hyprland?" && hyprctl dispatch exit
bind = $mod+SHIFT,c,exec,hyprctl reload

# Workspace/window mappings
bind = $mod,q,killactive
bind = $mod,f,fullscreenstate, 1
bind = $mod,w,layoutmsg,togglefit
bind = $mod,h,movefocus,l
bind = $mod,j,movefocus,d
bind = $mod,k,movefocus,u
bind = $mod,l,movefocus,r
bind = $mod,left,movefocus,l
bind = $mod,down,movefocus,d
bind = $mod,up,movefocus,u
bind = $mod,right,movefocus,r
bind = $mod+SHIFT,h,layoutmsg,swapcol l
bind = $mod+SHIFT,j,movewindow,d
bind = $mod+SHIFT,k,movewindow,u
bind = $mod+SHIFT,l,layoutmsg,swapcol r
bind = $mod+SHIFT,left,movewindow,l
bind = $mod+SHIFT,down,movewindow,d
bind = $mod+SHIFT,up,movewindow,u
bind = $mod+SHIFT,right,layoutmsg,swapcol r
bind = $mod,1,workspace,1
bind = $mod,2,workspace,2
bind = $mod,3,workspace,3
bind = $mod,4,workspace,4
bind = $mod,5,workspace,5
bind = $mod,6,workspace,6
bind = $mod,7,workspace,7
bind = $mod,8,workspace,8
bind = $mod,9,workspace,9
bind = $mod+SHIFT,1,movetoworkspace,1
bind = $mod+SHIFT,2,movetoworkspace,2
bind = $mod+SHIFT,3,movetoworkspace,3
bind = $mod+SHIFT,4,movetoworkspace,4
bind = $mod+SHIFT,5,movetoworkspace,5
bind = $mod+SHIFT,6,movetoworkspace,6
bind = $mod+SHIFT,7,movetoworkspace,7
bind = $mod+SHIFT,8,movetoworkspace,8
bind = $mod+SHIFT,9,movetoworkspace,9

bind = $mod,EQUAL,layoutmsg,colresize +0.025
bind = $mod,minus,layoutmsg,colresize -0.025

bind = $mod+SHIFT,w,layoutmsg,fit all

bindm=$mod,mouse:272,movewindow
bindm=$mod,mouse:273,resizewindow

# Screenshot bindings
bind = ,Print,exec,sh -c 'sleep 0.2 && grim -g "$(slurp)" ~/Pictures/screenshots/screenshot_$(date +%Y_%m_%d_%H_%M_%S).png'

# Resize mode (Hyprland uses resizeactive)
bind = $mod,r,submap,resize
submap=resize
    bind = ,h,resizeactive,-20 0
    bind = ,j,resizeactive,0 20
    bind = ,k,resizeactive,0 -20
    bind = ,l,resizeactive,20 0
    bind = ,Return,submap,reset
    bind = ,Escape,submap,reset
submap=reset

# Lock screen
bind = CTRL+$mod,l,exec,hyprlock

# Record screen
bind = $mod+CTRL,r,exec,~/.config/hypr/record_screen.sh --start
bind = $mod+CTRL,s,exec,~/.config/hypr/record_screen.sh --stop

# Floating rules
windowrule {
  name = calculator
  float = on
  match:class = ^(org.gnome.Calculator)$
}

windowrule {
  name = chrome-save-file
  float = on
  match:class = ^(google-chrome)$
  match:title = ^(Save File)$
}

windowrule {
  name = thunar-rename-file
  float = on
  match:class = ^(Thunar)$
  match:title = ^(Rename.*)$
}

windowrule {
  name = thunar-file-operation
  float = on
  match:class = ^(Thunar)$
  match:title = ^(File Operation Progress)$
}


#Viber notification configuration
windowrule {
  name = viber-notifications
  float = on
  no_initial_focus = on
  pin = on
  move = ((monitor_w*1)) ((monitor_h*1))
  match:title = ^(ViberPC)$
}


windowrule {
  name = rofi-focus
  stay_focused = on
  match:class = ^(rofi)$
}


# Assign apps to workspaces
windowrule {
  name = workspace-2
  workspace = 2
  match:class = ^(google-chrome|firefox|Brave-browser)$
}

windowrule {
  name = workspace-4
  workspace = 4
  match:class = Slack
}

windowrule {
  name = workspace-6
  workspace = 6
  match:class = com.viber.Viber
}

# Smart gaps
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrule = border_size 0, match:float 0, match:workspace w[tv1]
windowrule = rounding 0, match:float 0, match:workspace w[tv1]
windowrule = border_size 0, match:float 0, match:workspace f[1]
windowrule = rounding 0, match:float 0, match:workspace f[1]
